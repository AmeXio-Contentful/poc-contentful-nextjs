fragment CategoryFields on Category {
  __typename
  sys {
    id
  }
  internalName
  slug
  seo {
    title
    description
    image {
      ...AssetFields
    }
    noIndex
    noFollow
  }
  categoryName
}

query CtfCategory($slug: String!, $locale: String, $preview: Boolean) {
  categoryCollection(where: { slug: $slug }, locale: $locale, preview: $preview, limit: 1) {
    items {
      ...CategoryFields
    }
  }
  postCollection(
    where: { category: { slug: $slug } }
    locale: $locale
    preview: $preview
    limit: 10
  ) {
    items {
      ...PostFieldsBase
    }
  }
}
